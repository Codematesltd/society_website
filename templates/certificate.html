<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ transaction.type|title }} Receipt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { margin: 0; }
        }
        @page { size: A4; margin: 2cm; }
    </style>
</head>
<body class="bg-gray-100 flex justify-center py-8 print:bg-white">
    <div class="bg-white shadow-lg rounded-lg w-[210mm] h-[297mm] mx-auto p-8 flex flex-col justify-between border border-gray-300 print:shadow-none print:border-none">
        <!-- Header -->
        <div>
            <div class="flex items-center justify-between mb-2">
                <img src="{{ url_for('static', filename='society_logo.png') }}" alt="Society Logo" class="h-20 w-20 object-contain">
                <div class="flex-1 text-center">
                    <h1 class="text-3xl font-bold tracking-wide">{{ society_name }}</h1>
                </div>
                <div class="w-20"></div>
            </div>
            <div class="flex justify-between text-lg mb-4">
                <div class="font-medium">Taluk: {{ taluk_name }}</div>
                <div class="font-medium">District: {{ district_name }}</div>
            </div>
            <div class="text-center my-4">
                <span class="text-2xl font-semibold underline">{{ transaction.type|title }} Receipt</span>
            </div>
        </div>
        <!-- Body -->
        <div class="flex-1 flex flex-col justify-center">
            <div class="grid grid-cols-2 gap-y-6 gap-x-8 text-lg max-w-2xl mx-auto">
                <div class="font-semibold">STID:</div>
                <div>{{ transaction.stid }}</div>
                <div class="font-semibold">Account Holder:</div>
                <div>{{ member.name }}</div>
                <div class="font-semibold">Amount:</div>
                <div>â‚¹ {{ transaction.amount }}</div>
                <div class="font-semibold">Amount (in words):</div>
                <div>{{ amount_words }}</div>
                <div class="font-semibold">Date:</div>
                <div>{{ transaction.date }}</div>
            </div>
        </div>
        <!-- Staff Details -->
        {% if staff %}
        <div class="staff-details" style="margin-top: 2em;">
            <h4 class="text-xl font-semibold mb-2">Processed By (Staff)</h4>
            <div style="display: flex; align-items: center;">
                {% if staff.photo_url %}
                    <img src="{{ staff.photo_url }}" alt="Staff Photo" style="width: 80px; height: 80px; object-fit: cover; border-radius: 50%; margin-right: 1em;">
                {% endif %}
                <div>
                    <strong class="text-lg">{{ staff.name }}</strong><br>
                    {% if staff.email %}
                        <span class="text-sm text-gray-600">{{ staff.email }}</span><br>
                    {% endif %}
                    {% if staff.signature_url %}
                        <img src="{{ staff.signature_url }}" alt="Staff Signature" style="width: 120px; height: 40px; object-fit: contain; margin-top: 0.5em;">
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        <!-- Footer -->
        <div class="flex justify-end items-center mt-8">
            <div class="text-center">
                <div class="mb-1 font-medium">Staff Signature</div>
                {% if staff_signature_url %}
                    <img src="{{ staff_signature_url }}" alt="Staff Signature" class="h-16 mx-auto border-b border-gray-400">
                {% else %}
                    <div class="h-16"></div>
                {% endif %}
                {% if staff_name %}
                    <div class="mt-2 font-semibold text-base">{{ staff_name }}</div>
                {% endif %}
            </div>
        </div>
        <!-- Buttons -->
        <div class="no-print flex justify-center gap-4 mt-8">
            <button onclick="window.print()" class="px-6 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700">Print</button>
            <a href="?action=download" class="px-6 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700">Download PDF</a>
        </div>
    </div>
</body>
</html>
